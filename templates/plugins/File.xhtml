<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xt="http://ns.inria.org/xtiger" xml:lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>The "file" plugin</title>

    <xt:head version="1.1" templateVersion="1.0" label="Demo">
    </xt:head>

    <style type="text/css" media="screen">
span.xt-file {
  display: inline-block;
  vertical-align: middle;
}
.btn {
	display: inline-block;
	*display: inline;
	padding: 4px 12px;
	margin-bottom: 0;
	*margin-left: .3em;
	font-size: 14px;
	line-height: 20px;
	color: #333333;
	text-align: center;
	text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
	vertical-align: middle;
	cursor: pointer;
	background-color: #f5f5f5;
	*background-color: #e6e6e6;
	background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));
	background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
	background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
	background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);
	background-repeat: repeat-x;
	border: 1px solid #cccccc;
	*border: 0;
	border-color: #e6e6e6 #e6e6e6 #bfbfbf;
	border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
	border-bottom-color: #b3b3b3;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
	filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
	*zoom: 1;
	-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
	-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
}
a.uneditable-input {
  display: block;
  width: 100%;
  min-height: 30px;
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
  cursor: pointer;
  float:right;
  width:auto;
  margin-left: 10px;
}
a.uneditable-input:focus {
  border: 1px solid #CCC;
  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
     -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
          box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
}
.uneditable-input {
  display: inline-block;
  height: 25px;
  padding: 4px 6px;
  margin-bottom: 10px;
  font-size: 14px;
  line-height: 20px;
  color: #555555;
  vertical-align: middle;
}
.uneditable-input {
  background-color: #ffffff;
  border:1px solid #404040;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
     -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
       -o-transition: border linear 0.2s, box-shadow linear 0.2s;
          transition: border linear 0.2s, box-shadow linear 0.2s;
}
.uneditable-input
{
  color: #999999;
  cursor: not-allowed;
  background-color: #fcfcfc;
  border-color: #cccccc;
  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
     -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
          box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.025);
}
     </style>

    <!-- template enrichment : extracts and generates xt:attribute and xt:use sample code -->
    <link rel="stylesheet" type="text/css" href="../shared/demo.css" />
    <script type="text/javascript" src="../../3rd-part/jquery/js/jquery-1.7.1.min.js">//</script>
    <script type="text/javascript" src="../shared/demo.js">//</script>
  </head>
  <body>
    <p class="warning">To test file upload, you must have opened this application from a web server implementing the file upload protocol</p>

    <h1>The "file" plugin</h1>

    <p>The <code>"file"</code> plugin uploads files to a server. It displays it's current content as an <code>img</code> image handler with a tooltip giving status information, including a link to download the file if available.</p>

    <ul class="parameters">
      <li><var>file_URL</var> (<code><b>/fileUpload</b></code>) : service endpoint address for sending file data using a POST request</li>
      <li><var>file_delete</var> (<code>undefined</code>) : optional service endpoint address for deleting uploaded file (e.g. <i>file_delete=xyz/cv/remove</i>). You can use the $_ string to inject the uploaded file url model data in the string. By default the delete action is triggered by a button displayed as a cross X through default AXEL styling of the <i>xt-file-del</i> class. When the <i>file_button_class</i> parameter is defined (see below), the button also inherits the corresponding class. In that case the X text is also replaced with the text under the <i>cmdDeleteFile</i> locales key (<i>Delete</i>)</li>
      <li><var>file_delete_verb</var> (<code><b>POST</b></code>) : HTTP verb to use for the delete request</li>
      <li><var>file_base</var> (<code>undefined</code>) : prefix to be added in front of the url to generate the link to retrieve a previously uploaded file; this link is displayed either in the tooltip or at the right side of the widget when <i>file_anchor_class</i> has been defined</li>
      <li><var>file_type</var> (<code><b>application/pdf</b></code>) : comma separated list of accepted file MIME types, it is passed as the <i>accept</i> attribute of the HTML input selector used as native file selection dialog box</li>
      <li><var>file_type_message</var> (<code><b>'warnFileTypeDefault'</b></code> key in locales) : alert message to show on selection of a file with wrong MIME type</li>
      <li><var>file_gen_name</var> (<code><b>auto</b></code> | manual) : when <i>manual</i> user can edit a file name to send to the server together with the file data; this edited name is first sent to the server in a preflight request; useful to let users edit file link names</li>
      <li><var>file_size_limit</var> (<code>undefined</code>) : file size limit in KB</li>
      <li><var>file_button_class</var> (<code>undefined</code>) : if defined it replaces the empty document icon by a <i>button</i> element with the class set to its value, it will also be copied to the class of the <i>Save</i> button which appear to send the file to the server upon selection; note both button labels are defines in the locales with <i>cmdSelectFile</i> and <i>cmdUpload</i> keys</li>
      <li><var>file_anchor_class</var> (<code>undefined</code>) : if defined changes the widget appearance by generating a link element <code>a</code> with the current file name right after the widget icons and buttons. This element replaces the transcient <code>span</code> element that appears on mouse over. It is visible only when a file hase been uploaded or no file has been uploaded. The string value of the <i>file_anchor_class</i> parameter is copied inside its class attribute so you can style it (e.g. with an input field look-and-feel see the example below). </li>
    </ul>
    
    <h2>Example</h2>
    
    <p>Add a file : 
      <xt:use types="file" label="LinkRef1" param="file_URL=test;file_gen_name=manual;file_type_message=Vous devez sÃ©lectionner un document PDF ou un document Microsoft Office (Word, Excel, Power Point);file_type=application/pdf application/msword application/vnd.openxmlformats-officedocument.wordprocessingml.document application/vnd.ms-excel application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.ms-powerpoint application/vnd.openxmlformats-officedocument.presentationml.presentation;filter=event;file_size_limit=1024"/>
    </p>
    
    <h2>With 'file_delete' option</h2>
    
    <p>Add a file : 
      <xt:use types="file" label="LinkRef2" param="file_URL=test;file_base=test;file_delete=delete;filter=event;file_size_limit=1024"/>
    </p>

    <h2>With 'file_button_class' option</h2>
    
    <p>Add a file :
      <xt:use types="file" label="LinkRef3" param="file_URL=test;file_base=test;file_delete=delete;filter=event;file_size_limit=1024;file_button_class=btn"/>
    </p>

    <h2>With 'file_anchor_class=uneditable-input' option</h2>
    
    <p>Add a file :
      <xt:use types="file" label="LinkRef4" param="file_URL=test;file_base=test;file_delete=delete;filter=event;file_size_limit=1024;file_anchor_class=uneditable-input"/>
    </p>
    
    <h2>With 'file_button_class' option and 'file_anchor_class=uneditable-input' option</h2>

    <p>Add a file :
      <xt:use types="file" label="LinkRef5" param="file_URL=test;file_base=test;file_delete=delete;filter=event;file_size_limit=1024;file_button_class=btn;file_anchor_class=uneditable-input"/>
    </p>
    
  </body>
</html>
